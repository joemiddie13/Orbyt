# Session Notes — Tuesday, February 11, 2026

## Summary
Security hardening day. Fixed all remaining low-severity issues from the security review. Added input validation, auth guards, CSP headers, and password constraints.

---

## Security Hardening (Low Severity Fixes)

### Input Validation
- Added string length limits: username (3–30), displayName (1–50), text content (1–5000)
- Added canvas position bounds: x (0–3000), y (0–2000)
- Added object size bounds: w/h (1–1000)
- Added max password length: 64 characters (server + client)

### Privacy
- Made `getByUuid` query auth-protected — profiles are private by default
- Decision: friend connections will use generated friend codes (like Finch's 10-char codes), not public UUID lookups
- UUIDs remain the canonical portable ID for AT Protocol, friend codes are a separate human-friendly identifier

### Production Hardening
- Cleaned up console.error logging — no longer exposes stack traces or error objects
- Added Content-Security-Policy header in hooks.server.ts
- Rate limiting: [researched — notes pending]

---

## Ideas for Later

### Cursor-Based Parallax Background (Space Theme)
- Visual separation between the canvas and the background
- Space scene behind the bounded canvas — stars, nebulae, etc.
- Cursor-based parallax: background layer moves slower than the world container when panning
- Implementation: separate PixiJS layer behind the world container, reduced movement multiplier (e.g., 0.3x the pan speed)
- Goal: make it obvious that the canvas is a bounded "surface" floating in space
- This ties into the broader vision of canvases as discrete spaces users navigate between

### Friend Codes (Layer 3)
- Finch-style 10-character alphanumeric friend codes
- Separate `friendCode` field on user record (not the UUID)
- Share via text/email to connect — no public profile discovery
- Limit connections (Finch does 3 friends — we'll decide our number)
- UUID stays as the AT Protocol portable ID

---

## Status
- Security review: all critical, medium, and low issues addressed
- Next: Layer 3 — Beacons, beacon responses, sticker reactions, friend codes
